<% content_for :page_title do %>
  <%= Spree.t(:auction) %>
<% end %>

<ul class="nav nav-tabs" role="tablist">
  <% active_me = 'active' if @tab.nil? %>
  <li class="<%= active_me %>"><a href="#live-auction" id="live-auction-tab" role="tab" data-toggle="tab"><%=Spree.t(:live_auctions)%></a></li>
  <% active_me = nil %>
  <% active_me = 'active' if ['purchase_history'].include? @tab %>
  <li class="<%= active_me %>"><a href="#purchase-history" id="purchase-history-tab" role="tab" data-toggle="tab"><%=Spree.t(:purchase_history)%></a></li>
  <% active_me = nil %>
  <li><a href="#awaiting-selection" role="tab" id="waiting-auction-tab" data-toggle="tab"><%=Spree.t(:awaiting_selection)%></a></li>
</ul>

<% active_me = 'active' if @tab.nil? %>
<div class="tab-content">
  <div class="tab-pane <%= active_me %> scrolling" id="live-auction">
    <table data-key="<%= spree_current_user.spree_api_key %>"
           data-id="<%= spree_current_user.id %>"
           class="table table-striped" id="live-auction-table">
      <thead>
        <tr>
          <th><%= Spree.t(:auction_hash) %></th>
          <th><%= Spree.t(:product) %></th>
          <th><%= Spree.t(:lowest_bid) %></th>
          <th><%= Spree.t(:quantity) %></th>
          <th><%= Spree.t(:start_date) %></th>
          <th><%= Spree.t(:end_date) %></th>
          <th class="actions"><%= Spree.t(:action_col) %></th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
  </div>
  <% active_me = nil %>
  <% active_me = 'active' if ['purchase_history'].include? @tab %>
  <div class="tab-pane <%= active_me %> scrolling" id="purchase-history">
    <table data-key="<%= spree_current_user.spree_api_key %>"
           data-id="<%= spree_current_user.id %>"
           class="table table-striped" id="buyer-purchase-history-table">
      <thead>
        <tr>
          <th><%= Spree.t(:auction_hash) %></th>
          <th><%= Spree.t(:product) %></th>
          <th><%= Spree.t(:date) %></th>
          <th><%= Spree.t(:quantity) %></th>
          <th><%= Spree.t(:total) %></th>
          <th><%= Spree.t(:status) %></th>
          <th>&nbsp;</th>
        </tr>
      </thead>
      <tbody>
        <tr><td class='text-center' colspan='5'><i class='fa fa-spinner fa-pulse fa-3x'></i></td></tr>
      </tbody>
    </table>
  </div>
  <% active_me = nil %>
  <div class="tab-pane scrolling" id="awaiting-selection">
    <table class="table table-striped" id="waiting-auction-table">
      <thead>
        <tr>
          <th><%= Spree.t(:auction_hash) %></th>
          <th><%= Spree.t(:product) %></th>
          <th><%= Spree.t(:lowest_bid) %></th>
          <th><%= Spree.t(:quantity) %></th>
          <th><%= Spree.t(:start_date) %></th>
          <th><%= Spree.t(:end_date) %></th>
          <th class="actions"><%= Spree.t(:action_col) %></th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
  </div>
</div>

<%= render partial: 'spree/dashboards/tracking_information_modal' %>
<%= render partial: 'spree/dashboards/buyer/reject_proof_feedback_modal' %>
<%= render partial: 'spree/dashboards/buyer/rating_modal' %>
<%= render partial: 'spree/dashboards/buyer/reject_order_modal' %>
